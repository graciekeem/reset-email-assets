<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>ë‚˜ì™€ ì–´ìš¸ë¦¬ëŠ” ì´ì„¸ê³„ ìŠ¤í‚¨ ë½‘ê¸° | ì—¬ê³ ìƒê³¼ ë¦¬ì…‹ì¤‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ğŸŸ¢ Favicon ì¶”ê°€ -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Neoë‘¥ê·¼ëª¨ í°íŠ¸ -->
  <style>
    @font-face {
      font-family: 'NeoDunggeunmo';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'NeoDunggeunmo', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: #050806;
      color: #e6fff3;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }


    .frame {
      width: 100%;
      max-width: 420px;
      border: 1px solid #15ff99;
      box-shadow: 0 0 24px rgba(21,255,153,0.25);
      background: #0a0d0a;
    }

    .header-bar {
      padding: 16px 20px;
      background: #0f1310;
      border-bottom: 1px solid #15ff99;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
    }
    .header-left {
      letter-spacing: 0.08em;
      color: #15ff99;
    }
    .header-right {
      color: #7af7c8;
    }

    .inner {
      padding: 20px 20px 22px;
      text-align: left;
    }

    .tag {
      font-size: 11px;
      letter-spacing: 0.08em;
      color: #7af7c8;
      margin-bottom: 6px;
    }

    .title {
      font-size: 18px;
      line-height: 1.5;
      color: #b8ffe6;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 13px;
      color: #9cffdd;
      margin-bottom: 16px;
      line-height: 1.6;
    }

    .card {
      width: 100%;
      aspect-ratio: 3 / 4;
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid #15ff99;
      background: #111827;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
    }
    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .skin-meta {
      margin-bottom: 14px;
    }
    .skin-name {
      font-size: 14px;
      color: #e6fff3;
      margin-bottom: 4px;
    }
    .skin-log {
      font-size: 12px;
      color: #7af7c8;
      line-height: 1.6;
    }

    .btn-area {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    /* ë²„íŠ¼ í°íŠ¸ Neoë‘¥ê·¼ëª¨ ê°•ì œ */
    button,
    #start-btn,
    #download-btn {
      font-family: 'NeoDunggeunmo', sans-serif !important;
    }

    #start-btn,
    #download-btn {
      width: 100%;
      padding: 12px 16px;
      border-radius: 999px;
      border: 1px solid #15ff99;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(21,255,153,0.45);
    }

    #start-btn {
      background: linear-gradient(90deg, #15ff99, #7af7c8);
      color: #050806;
    }
    #start-btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }

    #download-btn {
      background: #0f1310;
      color: #b8ffe6;
      box-shadow: 0 0 10px rgba(21,255,153,0.3);
    }
    #download-btn:disabled {
      opacity: 0.4;
      cursor: default;
      box-shadow: none;
    }

    .hint {
      font-size: 12px;
      margin-top: 14px;
      color: #9cffdd;
      line-height: 1.7;
      text-align: center;
    }
    .hint-strong {
      color: #b8ffe6;
    }

    /* ì´ì „ ë¡œê·¸ ë²„íŠ¼ */
    .back-share-area {
      margin-top: 16px;
      text-align: center;
    }
    .back-share-btn {
      display: inline-block;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid #15ff99;
      background: #0f1310;
      color: #b8ffe6;
      font-size: 13px;
      text-decoration: none;
      box-shadow: 0 0 10px rgba(21,255,153,0.35);
    }
    .back-share-btn:hover {
      background: #111b17;
    }

    /* ìº”ë²„ìŠ¤ëŠ” í™”ë©´ì— ì•ˆ ë³´ì´ê²Œ ìˆ¨ê¹€ */
    #share-canvas {
      display: none;
    }

    @media (max-width: 480px) {
      .frame {
        max-width: 100%;
      }
      .inner {
        padding: 16px 16px 20px;
      }
      .title {
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <div class="frame">

    <!-- ìƒë‹¨ ì‹œìŠ¤í…œ í—¤ë” -->
    <div class="header-bar">
      <div class="header-left">[ SYSTEM // YGSR ] SKIN MATCH</div>
      <div class="header-right">MODULE v1.0 Â· ONLINE</div>
    </div>

    <div class="inner">
      <div class="tag">[ SKIN // ROULETTE ]</div>

      <div class="title">ì˜¤ëŠ˜ì˜ ì´ì„¸ê³„ ìŠ¤í‚¨ì„ ìŠ¤ìº”í•©ë‹ˆë‹¤.</div>

      <p class="subtitle">
        ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìŠ¤í‚¨ ë°ì´í„°ê°€ ëœë¤ìœ¼ë¡œ ë¦¬ì…‹ë©ë‹ˆë‹¤.<br>
        ë©ˆì¶˜ ìˆœê°„ì´, ì§€ê¸ˆ í”Œë ˆì´ì–´ì˜ ê¸°ë³¸ í”„ë¡œí•„ì…ë‹ˆë‹¤.
      </p>

      <!-- ìŠ¤í‚¨ ì¹´ë“œ -->
      <div class="card">
        <img id="skin-image" src="character00.png" alt="ìŠ¤í‚¨ ë¯¸ë¦¬ë³´ê¸°">
      </div>

      <!-- ìŠ¤í‚¨ ì´ë¦„ / ë¡œê·¸ -->
      <div class="skin-meta">
        <div class="skin-name" id="skin-name">[ SKIN IDLE ] ì•„ì§ ë¦¬ì…‹ ì „ì…ë‹ˆë‹¤.</div>
        <div class="skin-log" id="skin-log">
          â–¶ S T A R T ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜¤ëŠ˜ì˜ ìŠ¤í‚¨ í”„ë¡œí•„ì„ ìŠ¤ìº”í•˜ì„¸ìš”.
        </div>
      </div>

      <!-- ë²„íŠ¼ ì˜ì—­ -->
      <div class="btn-area">
        <button id="start-btn" style="font-family:'NeoDunggeunmo',sans-serif;">
          â–¶ S T A R T
        </button>
        <button id="download-btn" disabled>ğŸ“ ê³µìœ ìš© ì´ë¯¸ì§€ ì €ì¥</button>
      </div>

      <!-- SNS ê³µìœ  ìœ ë„ -->
      <p class="hint">
        â–¶ ì´ ìŠ¤í‚¨ ë¡œê·¸ëŠ” SNS ì—…ë¡œë“œ ì‹œ <br>ë” ì•ˆì •ì ìœ¼ë¡œ ë³´ê´€ë©ë‹ˆë‹¤.<br>
        <span class="hint-strong">* ìŠ¤í¬ë¦°ìƒ· ë˜ëŠ” ê³µìœ ìš© ì´ë¯¸ì§€ë¥¼ ì €ì¥í•´ <br>ì¸ìŠ¤íƒ€ / X / í˜ì´ìŠ¤ë¶ì— íˆ¬í•˜í•´ ì£¼ì„¸ìš”.</span>
      </p>

      <!-- ì´ì „ ë¡œê·¸ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ -->
      <div class="back-share-area">
        <a href="https://supercandi.figma.site/end" class="back-share-btn">
          â—€ ì´ì „ ë¡œê·¸ë¡œ ëŒì•„ê°€ ê³µìœ í•˜ê¸°
        </a>
      </div>
    </div>
  </div>

  <!-- ê³µìœ ìš© ì´ë¯¸ì§€ ìƒì„±ìš© ìº”ë²„ìŠ¤ (ìŠ¤í† ë¦¬ ê·œê²© 1080x1920) -->
  <canvas id="share-canvas" width="1080" height="1920"></canvas>

<script>
  // ìŠ¤í‚¨ ë¦¬ìŠ¤íŠ¸
  const skins = [
    { src: "character00.png", name: "ê¸°ë³¸ êµë³µ ìŠ¤í‚¨" },
    { src: "character01.png", name: "ì „íˆ¬ ëª¨ë“œ ìŠ¤í‚¨" },
    { src: "character02.png", name: "ìº£ ë©”ì´ë“œ ìŠ¤í‚¨" },
    { src: "character03.png", name: "í•‘í¬ êµë³µ ìŠ¤í‚¨" },
    { src: "character04.png", name: "ì•…ë§ˆ ì½”ìŠ¤íŠ¬ ìŠ¤í‚¨" },
    { src: "character05.png", name: "ì²œì‚¬ ì½”ìŠ¤íŠ¬ ìŠ¤í‚¨" }
  ];

  const img = document.getElementById("skin-image");
  const btn = document.getElementById("start-btn");
  const downloadBtn = document.getElementById("download-btn");
  const nameEl = document.getElementById("skin-name");
  const logEl = document.getElementById("skin-log");
  const canvas = document.getElementById("share-canvas");
  const ctx = canvas.getContext("2d");

  let intervalId = null;
  let lockedSkin = null; // ìµœì¢… í™•ì •ëœ ìŠ¤í‚¨ ì •ë³´ ì €ì¥

  btn.addEventListener("click", () => {
    if (intervalId) return; // ì´ë¯¸ ëŒë¦¬ëŠ” ì¤‘ì´ë©´ ë¬´ì‹œ

    btn.disabled = true;
    downloadBtn.disabled = true;
    btn.textContent = "R E S E T T I N G...";
    nameEl.textContent = "[ SCAN ] ìŠ¤í‚¨ ë°ì´í„° ìŠ¤ìº” ì¤‘â€¦";
    logEl.textContent = "ë£°ë › íšŒì „ ì¤‘â€¦ í˜„ì¬ í”„ë¡œí•„ì€ ì•„ì§ ì ê¸ˆ í•´ì œ ì „ì…ë‹ˆë‹¤.";

const startTime = Date.now();
const duration = 1500;   // 1.5ì´ˆ
const changeSpeed = 20;  // 0.02ì´ˆ

    intervalId = setInterval(() => {
      const randomIndex = Math.floor(Math.random() * skins.length);
      const current = skins[randomIndex];
      img.src = current.src;
      nameEl.textContent = `[ CANDIDATE ] ${current.name}`;

      const elapsed = Date.now() - startTime;
      if (elapsed >= duration) {
        clearInterval(intervalId);
        intervalId = null;

        // ìµœì¢… í™•ì •
        const finalIndex = Math.floor(Math.random() * skins.length);
        const finalSkin = skins[finalIndex];
        lockedSkin = finalSkin;

        img.src = finalSkin.src;
        nameEl.textContent = `[ LOCKED ] ${finalSkin.name}`;
        logEl.textContent = "í”„ë¡œí•„ ì ê¸ˆ ì™„ë£Œ. ì´ ì´ë¯¸ì§€ê°€ ì˜¤ëŠ˜ì˜ ê¸°ë³¸ ìŠ¤í‚¨ì…ë‹ˆë‹¤.";

        btn.textContent = "R E S T A R T";
        btn.disabled = false;
        downloadBtn.disabled = false;
      }
    }, changeSpeed);
  });

  // ê³µìœ ìš© ì´ë¯¸ì§€ ìƒì„± + ë‹¤ìš´ë¡œë“œ (ìŠ¤í† ë¦¬ ë¹„ìœ¨ 1080x1920)
  downloadBtn.addEventListener("click", () => {
    if (!lockedSkin) {
      alert("ë¨¼ì € ìŠ¤í‚¨ ë£°ë ›ì„ ëŒë ¤ì„œ ì˜¤ëŠ˜ì˜ ìŠ¤í‚¨ì„ í™•ì •í•´ ì£¼ì„¸ìš”.");
      return;
    }

    const image = new Image();
    image.src = lockedSkin.src; // ê°™ì€ originì— ì´ë¯¸ì§€ ë‘ë©´ CORS ë¬¸ì œ ì—†ìŒ

image.onload = () => {
  const w = canvas.width;   // 1080
  const h = canvas.height;  // 1920

  // ë°°ê²½
  ctx.fillStyle = "#050806";
  ctx.fillRect(0, 0, w, h);

  // í”„ë ˆì„
  ctx.strokeStyle = "#15ff99";
  ctx.lineWidth = 4;
  ctx.strokeRect(32, 32, w - 64, h - 64);

  // ìƒë‹¨ í…ìŠ¤íŠ¸
  ctx.fillStyle = "#15ff99";
  ctx.font = "22px NeoDunggeunmo, monospace";
  ctx.textAlign = "left";
  ctx.fillText("[ SYSTEM // YGSR ] SKIN MATCH", 64, 96);

  ctx.fillStyle = "#7af7c8";
  ctx.font = "16px NeoDunggeunmo, monospace";
  ctx.fillText("MODULE v1.0 Â· PROFILE CAPTURE", 64, 128);

  // ğŸ”¹ ì¹´ë“œ ì˜ì—­ (í‹€)
  const cardWidth = w * 0.72;
  const cardHeight = cardWidth * 4 / 3; // ì¹´ë“œ ìì²´ ë¹„ìœ¨ 3:4
  const cardX = (w - cardWidth) / 2;
  const cardY = 260;

  ctx.fillStyle = "#111827";
  ctx.fillRect(cardX - 4, cardY - 4, cardWidth + 8, cardHeight + 8);
  ctx.strokeStyle = "#15ff99";
  ctx.lineWidth = 3;
  ctx.strokeRect(cardX - 4, cardY - 4, cardWidth + 8, cardHeight + 8);

  // ğŸ”¹ ì›ë³¸ ë¹„ìœ¨ ìœ ì§€í•´ì„œ ê·¸ë¦¬ê¸° (ì—¬ê¸°ê°€ í•µì‹¬)
  const imgW = image.naturalWidth;
  const imgH = image.naturalHeight;
  const imgRatio = imgW / imgH;
  const cardRatio = cardWidth / cardHeight;

  let drawW, drawH, drawX, drawY;

  if (imgRatio > cardRatio) {
    // ì´ë¯¸ì§€ê°€ ë” ê°€ë¡œë¡œ ê¸´ ê²½ìš° â†’ ê°€ë¡œë¥¼ ì¹´ë“œ í­ì— ë§ì¶”ê³ , ì„¸ë¡œëŠ” ë¹„ìœ¨ëŒ€ë¡œ
    drawW = cardWidth;
    drawH = cardWidth / imgRatio;
    drawX = cardX;
    drawY = cardY + (cardHeight - drawH) / 2;
  } else {
    // ì´ë¯¸ì§€ê°€ ì„¸ë¡œë¡œ ê¸´ ê²½ìš° â†’ ì„¸ë¡œë¥¼ ì¹´ë“œ ë†’ì´ì— ë§ì¶”ê³ , ê°€ë¡œëŠ” ë¹„ìœ¨ëŒ€ë¡œ
    drawH = cardHeight;
    drawW = cardHeight * imgRatio;
    drawX = cardX + (cardWidth - drawW) / 2;
    drawY = cardY;
  }

  ctx.drawImage(image, drawX, drawY, drawW, drawH);

  // ğŸ”¹ ìŠ¤í‚¨ ì´ë¦„
  ctx.textAlign = "center";
  ctx.fillStyle = "#e6fff3";
  ctx.font = "42px NeoDunggeunmo, monospace";
  const textY = cardY + cardHeight + 80;
  ctx.fillText(lockedSkin.name, w / 2, textY);

  // ğŸ”¹ ì„œë¸Œ í…ìŠ¤íŠ¸
  ctx.fillStyle = "#7af7c8";
  ctx.font = "32px NeoDunggeunmo, monospace";
  ctx.fillText("ì˜¤ëŠ˜ì ìŠ¤í‚¨ í”„ë¡œí•„ ì ê¸ˆ ì™„ë£Œ.", w / 2, textY + 40);
  ctx.fillText("ì´ ì´ë¯¸ì§€ë¥¼ SNSì— ì—…ë¡œë“œí•´ í”Œë ˆì´ì–´ ì¸ì¦í•˜ì„¸ìš”.", w / 2, textY + 72);

  // ğŸ”¹ í•˜ë‹¨ ë¼ë²¨
  ctx.fillStyle = "#9cffdd";
  ctx.font = "16px NeoDunggeunmo, monospace";
  ctx.fillText("ì—¬ê³ ìƒê³¼ ë¦¬ì…‹ì¤‘ Â· SUPER CANDI", w / 2, h - 80);

  // ë‹¤ìš´ë¡œë“œ
  const link = document.createElement("a");
  link.download = `ygsr_skin_${Date.now()}.png`;
  link.href = canvas.toDataURL("image/png");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
};

    image.onerror = () => {
      alert("ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.");
    };
  });
</script>

</body>
</html>
